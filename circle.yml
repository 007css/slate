machine:
  ruby:
    version: 1.9.3-p385
  node:
    version: 6.2.2

dependencies:
  pre:
    - npm install -g npm shopify/sass-lint eslint eslint-plugin-shopify eslint-plugin-node jsonlint
  bundler:
    without:
      - benchmark
      - deploy
      - production
      - debug
  cache_directories:
    - .bundle/

test:
  override:
    - bundle exec rspec spec
    - sass-lint --config '.scss-lint.yml' --max-warnings 0 --verbose
    - eslint '**/*.js' --config '.eslintrc.yml' --ignore-path '.eslintignore' --max-warnings 0
    - ls **/*.json | grep -v node_modules | grep -v docs | xargs -n1 jsonlint -q
